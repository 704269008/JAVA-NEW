<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>葡萄藤PPT</title>

    <link rel="stylesheet" href="https://ptteng.github.io/PPT/css/reveal/reveal.css">

    <!-- PPT主题，可以在/css/reveal/theme/中选择其他主题，目前暂时只能使用该模板 -->
    <link rel="stylesheet" href="https://ptteng.github.io/PPT/css/reveal/theme/ptt.css">

    <!-- syntax highlighting 代码高亮主题 -->
    <link rel="stylesheet" href="https://ptteng.github.io/PPT/lib/reveal/css/zenburn.css">

    <!-- 打印和PDF输出样式 -->
    <script>
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match( /print-pdf/gi ) ? 'https://ptteng.github.io/PPT/css/reveal/print/pdf.css' : '../css/reveal/print/paper.css';
        document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>
</head>
<body>
<img src="https://ptteng.github.io/PPT/img/demo/logo.png" alt="" usemap="#pttmap" class="base-logo">
<map name="pttmap">
    <area shape="rect" coords="0,0,276,58" href="http://www.jnshu.com" alt="" target="_blank"/>
</map>
<div class="reveal">
    <div class="slides">
        <section>
            <h2>什么是tcp/ip协议？TCP的三次握手指的是什么，为什么一定要三次握手，而不是四次或者是两次？</h2>
            <p></p>
            <p></p>
            <h3>java 小课堂</h3>
            <p></p>
            <p></p>
            <p>分享人：乔名震</p>
        </section>
        <section>
            <p>1.背景介绍</p>
            <p>2.知识剖析</p>
            <p>3.常见问题</p>
            <p>4.解决方案</p>
            <p>5.编码实战</p>
            <p>6.扩展思考</p>
            <p>7.参考文献</p>
            <p>8.更多讨论</p>
        </section>
        <section>
            <h3>1.背景介绍</h3>
        </section>

         <section>
          <p>要想了解什么是TCP/IP协议，就要知道什么是网络协议。书本上的定义：网络协议是为计算机网络中进行数据交换而建立的规则、标准或约定的集合。</p>
          <p>中国人之间交流使用汉语，要遵循汉语的语法结构和发音；那如果我们跟英国人交流的话，就要使用英语的语法结构和发音；我们人与人之间交流所用的语言就是一种协议。对于计算机来说，两台机器之间的通信就要制定各种各样的协议，例如：文件传输使用TCP协议，域名系统使用DNS协议。数据根据协议规定的内容进行传输，这样就实现了两台机器之间的通信。</p>
          <p>总的来说：网络协议就是人为规定的一套通信规范，只要双方都遵循这个规范，就能实现交流。</p>
        </section>
   <section>
   	<p>TCP/IP具体含义：从字面意义上讲，可能会认为 TCP/IP 是指 TCP 和 IP 两种协议。然而多数情况下，它只是利用ip进行通信时所必须用到的协议群的统称。具体来说，IP 或 ICMP、TCP 或 UDP、TELNET 或 FTP、以及 HTTP 等都属于 TCP/IP 协议。他们与 TCP 或 IP 的关系紧密，是互联网必不可少的组成部分。TCP/IP 一词泛指这些协议，因此，有时也称 TCP/IP 为网际协议群。</p>	
   </section>

        <section>
            <h3>2.知识剖析</h3>
        </section>

       <section>
      <p>TCP/IP协议族中有一个重要的概念是分层，TCP/IP协议按照层次分为以下四层：</p>
      <p>应用层、传输层、网络层、数据链路层。提到协议分层，通常会联想到OSI的七层协议经典架构，但是TCP/IP协议族的结构则稍有不同。如图所示</p>
 </section>
     
<section>
	<p>数据链路层</p>
	<p>数据链路层的功能：定义了电信号的分组方式， 统一的标准，即以太网协议ethernet</p>
</section>
<section>
	<p>ethernet规定接入internet的设备都必须具备网卡，发送端和接收端的地址便是指网卡的地址，即mac地址</p>
	<p>mac地址：每块网卡出厂时都被烧制上一个世界唯一的mac地址，长度为48位2进制，通常由12位16进制数表示（前六位是厂商编号，后六位是流水线号）</p>
	<p>有了mac地址，两台硬件设备就可以通信，通过arp协议获取另一台设备的mac地址；以广播的方式进行发送（群发），所有的设备收到数据包后，自己验证报头head部分中的mac地址是不是自己的，来确定是否响应</p>
</section>
<section>
	<p>首先，以太网的广播方式， 一台机器发送的包全世界都会收到；</p>
	<p>其次，互联网是由一个个彼此隔离的小的局域网组成的，在局域网内以广播的方式；为了分辨广播域， 采用路由的方式（向不同广播域／子网分发数据包）；</p>
</section>
<section>
	<p>网络层</p>
	<p>网络层功能：引入一套新的地址用来区分不同的广播域／子网，这套地址即网络地址</p>
</section>
<section>
	<p>IP协议：</p>
	<p>规定网络地址的协议叫ip协议，它定义的地址称之为ip地址</p>
	  <p>ip地址分成两部分</p>
            <p>网络地址：标识子网----网络ip--区分子网</p>
            <p>主机地址：标识主机----分配的ip--确认主机</p>
            <p>ip地址和子网掩码计算>>>>>得到网络地址和主机地址</p>
            <p>1、网络地址：ip地址结合子网掩码区分出自己所处的子网-----确定属于哪一个局域网</p>
            <p>2、地址解析协议ARP：以广播的方式发送数据包（报头中包含主机ip），主机通过主机ip确定是否响应，返回自己的mac地址</p>
</section>

<section>
	<p>传输层的由来：</p>
	<p>网络层的ip帮我们区分子网，以太网层的mac帮我们找到主机，然后大家使用的都是应用程序--通过端口确定应用程序</p>
	  <p>传输层功能：建立端口到端口的通信</p>
            <p>tcp协议：</p>
            <p>可靠传输，TCP数据包没有长度限制，理论上可以无限长，但是为了保证网络的效率，通常TCP数据包的长度不会超过IP数据包的长度，以确保单个TCP数据包不必再分割。</p>
            <p>udp协议：</p>
            <p>不可靠传输，”报头”部分一共只有8个字节，总长度不超过65,535字节，正好放进一个IP数据包。</p>
           
</section>

<section>
	<p>应用层由来：用户使用的都是应用程序，均工作于应用层，互联网是开发的，大家都可以开发自己的应用程序，数据多种多样，必须规定好数据的组织形式 </p>
	<p>应用层功能：规定应用程序的数据格式。</p>
	  <p>浏览器和服务端之间通信所用的协议是HTTP协议，所传输数据的主要格式为HTML。</p>
            <p>发送电子邮件时用到的协议是SMTP。</p>
            <p>文件传输（FTP)</p>
            <p>远程登录常用TELNET与SSH两种协议。远程登录是指登录到远程的计算机上，使那台计算机上的程序得以运行的一种功能。</p>
            <p>网络管理（SNMP）</p>
           
</section>
        <section>
            <h3>3.常见问题</h3>
        </section>
        <section>
      <p>1，TCP/IP协议通信的过程？</p>
      <p>2，如何建立TCP/IP连接？</p>
      <p>3，为什么要三次握手？</p>
        </section>
        <section>
            <h3>4.解决方案</h3>
        </section>
       <section>
    <p>1，TCP/IP协议通信的过程</p>
    <p>通信的过程其实就对应着数据装包与拆包的过程。装包的过程，数据发送方每层不断地封装首部，添加一些信息用于传输，确保能传输到目的地。拆包的过程，数据接收方每层不断地拆除首部，得到最终传输的数据。（图例）
    </p>
    <p>每个分层中，都会对所发送的数据附加一个首部，在这个首部中包含了该层必要的信息，如发送的目标地址以及协议相关信息。通常，为协议提供的信息为包首部，所要发送的内容为数据。在下一层的角度看，从上一层收到的包全部都被认为是本层的数据。
    </p>
       </section>
           <section>
      <p>1、浏览器访问网址</p>
      <p>2、dns协议解析域名</p>
      <p>3、http协议---http数据，确定数据传输格式等</p>
      <p>4、TCP协议---加TCP首部----端口之间发送数据包----三次握手达成连接</p>
	  <p>5、IP协议---加IP首部----通过IP地址确定网络地址</p>
      <p>6、以太网协议--加以太网首部----确定mac地址（主机网卡的唯一标识）</p>
        </section>
	   
        <section>
        	<p>2，如何建立TCP/IP连接？</p>
        	<p>TCP传输控制协议，是一个面向连接的协议。在TCP/IP协议中，TCP协议提供可靠的连接服务，连接是通过三次握手进行初始化的。所谓三次握手是指建立一个 TCP 连接时需要客户端和服务器端总共发送三个包以确认连接的建立。三次握手的目的是同步连接双方的序列号和确认号并交换 TCP窗口大小信息。</p>
        	
        </section>
        <section>
        	<p>TCP报文格式（图）</p>
        	<p>(1)序列号：Sql序号，用来标识数据包，发起方发送数据时对此进行标记。</p>
        	<p>(2)确认序号：Ack序号，只有ACK标志位为1时，确认序号字段才有效，Ack=Seq+1。</p>
        	<p>(3)标志位：共6个，即SYN、ACK、PSH、RST、URG、FIN</p>
        	<p>
        		1）SYN：发起一个请求。 
        		2）ACK：确认序号有效（表示对请求的响应）。 <br>
        		3）URG：紧急指针（urgent pointer）有效。
        		4）PSH：接收方应该尽快将这个报文交给应用层。<br>
        		5）RST：重置连接。
        		6）FIN：释放一个连接。<br>
        	</p>
        	
        </section>
        <section>
        	<p>需要注意的是：
                （A）不要将确认序号Ack与标志位中的ACK搞混了。<br>
                （B）确认方Ack=发起方Seq+1，两端配对。 </p>
        </section>
        <section>
        <p>
        第一次握手：客户端发送一个TCP标志位SYN=1，ACK=0的数据包给服务端，并随机会产生一个Seq=J.当服务端接收到这个数据后，服务端由SYN=1可知客户端是想要建立连接；<br>

        第二次握手：服务端要对客户端的联机请求进行确认，向客户端发送应答号ACK=1、SYN=1
        确认号Ack=J+1，此值是客户端的序列号加1，还会产生一个随机的序列号Seq=K，这样就告诉客户端可以进行连接；  <br>

       第三次握手：客户端收到数据后检查Ack是否为J+1，以及标志位ACK的值是否为1，若为1，则会发送ACK=1、确认号码Ack=K+1，告诉服务端,你的请求连接被确认，连接可以建立，Client和Server进入ESTABLISHED状态，完成三次握手，随后Client与Server之间可以开始传输数据了。
</p>
        </section>
        <section>
        	<p>3,为什么要三次握手？</p>
        	<p>为了防止已失效的连接请求报文段突然又传送到了服务端，因而产生错误。</p>
        	<p>三次握手是在安全可靠的基础上，握手次数最少的方案。两次握手并不能保证可靠性。四次握手又浪费了效率，当然，有的需要更高安全性的地方，是可以有N次握手协议的，但那是特殊情况。</p>
        </section>
		 <section>
		 <p>主要目的防止server端一直等待，浪费资源。</p>
        	<p> 在谢希仁著《计算机网络》第四版中讲“三次握手”的目的是“为了防止已失效的连接请求报文段突然又传送到了服务端，因而产生错误”。</p>
<p> client发出的第一个连接请求报文段并没有丢失，而是在某个网络结点长时间的滞留了，以致延误到连接释放以后的某个时间才到达server。本来这是一个早已失效的报文段。但server收到此失效的连接请求报文段后，就误认为是client再次发出的一个新的连接请求。于是就向client发出确认报文段，同意建立连接。假设不采用“三次握手”，那么只要server发出确认，新的连接就建立了。由于现在client并没有发出建立连接的请求，因此不会理睬server的确认，也不会向server发送数据。但server却以为新的运输连接已经建立，并一直等待client发来数据。这样，server的很多资源就白白浪费掉了。</p>
        	</section>
		
        <section>
            <h3>5.编码实战</h3>
        </section>

        <section>
            <h3>6.扩展思考</h3>
        </section>

        <section>
        	<p>网络TCP建立连接为什么需要三次握手而结束要四次挥手？</p>
        </section>
<section>
	<p>差别在于：</p>
			<p>三次握手：client请求连接SYN---server确认收到，发送ACK和SYN---client确认收到</p>
			<p>四次挥手：client请求关闭FIN---（server确认收到，发送ACK---server继续发送数据直到完毕，发送FIN）----client确认收到</p>
	</section>

        <section>
            <h3>7.参考文献</h3>
        </section>
        <section>
            <p>网络协议</p>
            <p>https://www.cnblogs.com/linhaifeng/articles/5937962.html</p>
            <p>三次握手</p>
            <p>https://www.cnblogs.com/QingFlye/p/4442529.html</p>
            <p>基于实例</p>
            <p>https://blog.csdn.net/chenvast/article/details/77978588</p>
            <p>https://www.cnblogs.com/rootq/articles/1377355.html</p>
       
        </section>
        <section>
            <h3>8.更多讨论</h3>

        </section>
        <section>
        
        </section>
      
        <section>
            <h4>鸣谢</h4>
            <p>感谢观看,如有出错,恳请指正。</p>
            <p>
               BY : 西安分院 乔名震
            </p>
        </section>
    </div>
</div>

<script src="https://ptteng.github.io/PPT/lib/reveal/js/head.min.js"></script>
<script src="https://ptteng.github.io/PPT/lib/reveal/reveal.js"></script>

<script>
    // 以下为常见配置属性的默认值
    // {
    //  controls: true, // 是否在右下角展示控制条
    //  progress: true, // 是否显示演示的进度条
    //  slideNumber: false, // 是否显示当前幻灯片的页数编号，也可以使用代码slideNumber: 'c / t' ，表示当前页/总页数。
    //  history: false, // 是否将每个幻灯片改变加入到浏览器的历史记录中去
    //  keyboard: true, // 是否启用键盘快捷键来导航
    //  overview: true, // 是否启用幻灯片的概览模式，可使用"Esc"或"o"键来切换概览模式
    //  center: true, // 是否将幻灯片垂直居中
    //  touch: true, // 是否在触屏设备上启用触摸滑动切换
    //  loop: false, // 是否循环演示
    //  rtl: false, // 是否将演示的方向变成RTL，即从右往左
    //  fragments: true, // 全局开启和关闭碎片。
    //  autoSlide: 0, // 两个幻灯片之间自动切换的时间间隔（毫秒），当设置成 0 的时候则禁止自动切换，该值可以被幻灯片上的 ` data-autoslide` 属性覆盖
    //  transition: 'default', // 切换过渡效果，有none/fade/slide/convex/concave/zoom
    //  transitionSpeed: 'default', // 过渡速度，default/fast/slow
    //  mouseWheel: true, //是否启用通过鼠标滚轮来切换幻灯片
    // }
    // 初始化幻灯片
    Reveal.initialize({
        history: true,
        dependencies: [
            { src: 'https://ptteng.github.io/PPT/plugin/markdown/marked.js' },
            { src: 'https://ptteng.github.io/PPT/plugin/markdown/markdown.js' },
            { src: 'https://ptteng.github.io/PPT/plugin/notes/notes.js', async: true },
            { src: 'https://ptteng.github.io/PPT/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
        ]
    });
</script>
</body>
</html>
